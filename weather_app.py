# -*- coding: utf-8 -*-
"""Weather_app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1TeTdCBvtpwda9f0PGjwiR7w7GB7_3sUD
"""

import streamlit as st
import requests
import matplotlib.pyplot as plt

# ğŸŒ¤ ì•± ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="Weather API App", page_icon="ğŸŒ¦ï¸", layout="centered")

st.title("ğŸŒ¦ï¸ ì‹¤ì‹œê°„ ë‚ ì”¨ Open API ì•±")
st.caption("Powered by OpenWeather API")

# ğŸ”¹ ë„ì‹œ ì…ë ¥
city = st.text_input("ë„ì‹œ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: Seoul, Busan, Tokyo)", "Seoul")

# ğŸ”¹ API í‚¤ ì…ë ¥
st.info("âš™ï¸ OpenWeatherì—ì„œ API í‚¤ë¥¼ ë°œê¸‰ë°›ì•„ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.")
API_KEY = st.text_input("API Key ì…ë ¥", type="password")

# ğŸ”¹ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰
if st.button("ë‚ ì”¨ ë¶ˆëŸ¬ì˜¤ê¸°"):
    if not API_KEY:
        st.error("âŒ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    else:
        url = f"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={API_KEY}&units=metric"
        response = requests.get(url)

        if response.status_code == 200:
            data = response.json()
            temp = data['main']['temp']
            feels_like = data['main']['feels_like']
            humidity = data['main']['humidity']
            weather = data['weather'][0]['description']